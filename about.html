<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>New Web Project</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <script type="text/javascript" src="data/visference-config.js"></script>
        <script type="text/javascript" src="data/data.js"></script>
        <script>
        $(document).ready(function() {
			$('#showhidefilters').click(function() {
					//  get the width in %
					var width = $('#tablecontainer').width();
					var parentWidth = $('#tablecontainer').offsetParent().width();
					var percent = 100*width/parentWidth;
					
					if (Math.floor(percent) > 90) {
						$("#tablecontainer").css("width", "");
						$('#tablecontainer').promise().done(function(){
							$('#sidebar').show("slow");
						});
					} else {
						$('#sidebar').hide();
						$('#sidebar').promise().done(function(){
							$("#tablecontainer").animate({"width": "100%"}, "slow");
						});
					}
			});

			// Put title and metadata in #title
			function loadMetadata(tid)  {
					var meta = "";
					$.each( METADATA, function( key, val )  {
							if (val.tid == tid)  {
								meta += "<h2>"+val.title+"</h2>";
								$.each( val, function( k, v )  {
									console.log("OKmeta: "+k+" | "+v);
								});
							}
					});
					$("#title").html(meta);
			}

			// Get Json var			
			function loadText(tid, pid) {
				$.getJSON( "data/texts/"+tid+".json", function( data ) {
					//var items = [];
					$.each( data, function( key, val ) {
						//items.push( "<li id='" + key.p + "'>" + val.p + "</li>" );
						// Put text in #text
						$( "#text" ).append( "<p id='" + val.pid + "'>" + val.pid +" | "+ val.p + "</p>" );
					});
					console.log( "Data is here!" );
					console.log( "Number of paragraphs: "+data.length );
					console.log( data[0].p );
					
				});
			}	

				

				
				// Animate the jump to paragraph
//			}

			// Load text on clic
			$("#node").click(function() {
				loadMetadata(2);
				loadText(2, 4);
			});
		});
		</script>
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
	<script src="js/html-include-bootstrap.js"></script>	
	<div class="mycontainer">
		<!-- Main hero unit for a primary marketing message or call to action -->
		<div style="position:relative;width:90%;">
			<div id="right">
				<p>Showing</p>
				<div id="countercontainer">
					<br />
					<span id="counter">XX
					</span>
				</div>
				<p>documents</p>
			</div>	
		</div>
		<p><img src="http://jmlr.org/jmlr.jpg" width="120px" /></p>
		<p><a id="showhidefilters" class="btn btn-primary">show/hide sidebar</a></p>
		<div class="hero-unit" id="sidebar" data-spy="affix" style="position:relative;float:left;width:15%;">
		<p>Text here</p>
		<div id="filters">
		</div>
		</div>
	</div>
	<!--Post bootstrap-->
	<div id="node">load text
	</div>
	<div id="title">
	</div>
	<div style="clear:both;"></div>
	<div id="text">
	</div>
	<div style="clear:both;"></div>
	<hr>
	<footer>
		<p>my foofter</p>
	</footer>
    </body>
</html>
