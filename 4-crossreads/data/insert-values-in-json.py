import json
import simplejson
from pprint import pprint
import re

'''
    this file is just changing for every little operations  in diaries.json
'''

new_diaries = []
with open('diaries.json') as data_file:
    data = json.load(data_file)

'''
#diaries_list = [100288, 100292, 100340, 100390, 100410, 115153, 115158, 115160, 115161, 115169, 115180, 115183, 115185, 115190, 115197, 115198, 115200, 115203, 115206, 115207, 115215, 115219, 115221, 115223, 115225, 115228, 115229, 115232, 115234, 115241, 115249, 115251, 115256, 115258, 115260, 115262, 182199, 182200, 182203, 182205, 182208, 182214, 182219, 182222, 182223, 182225, 182226, 182241, 182244, 182245, 182247, 182248, 182259, 182265, 182268, 182269, 182270, 182273, 182276, 182278, 182282, 182286, 182287, 182289, 182292, 182297, 182299, 182300, 182303, 182304, 182306, 182311, 182312, 182313, 182314, 182316, 182317, 182324, 182328, 272565, 272566, 272567, 272568, 272569, 272570, 272571, 272572, 272573, 272574, 272575, 272576, 272577, 272578, 272579, 272580, 272581, 272582, 272583, 272584, 272585, 272586, 272587, 272588, 272590, 272591, 272592, 272593, 272594, 272595, 272596, 272598, 272599, 281497, 281499, 281500, 281509, 281512, 281515, 281516, 281518, 281519, 281520, 281521, 281522, 281523, 281524, 281525, 281526, 281527, 281528, 281529, 281530, 281531, 281532, 281534, 281535, 281536, 281537, 281539, 281540, 281542, 281544, 281545, 281546, 281547, 281548, 281549, 281550, 281551, 281553, 281554, 281555, 281556, 281557, 281558, 281559, 281560, 281561, 281564, 281565, 281566, 281567, 281569, 281570, 281572, 281576, 281578, 281580, 281581, 281583, 281586, 281587, 281589, 281590, 281592, 281594, 281603, 281604, 281605, 281607, 281609, 281618, 281619, 281621, 281624, 281633, 281635, 281746, 281846, 283219, 298876, 298877, 298878, 298879, 298880, 298881, 298882, 298883, 298884, 298885, 298886, 298889, 298890, 298891, 298892, 298893, 298894, 298895, 298896, 298897, 298898, 298899, 298900, 298901, 298902, 298903, 298904, 298905, 298906, 298907, 298908, 298909, 298910, 298911, 298912, 298913, 298914, 298915, 298916, 298917, 298918, 298919, 298920, 298921, 298922, 298923, 298924, 298925, 298926, 298927, 298928, 298929, 298930, 298931, 298932, 298933, 298934, 298935, 298936, 298937, 298938, 298939, 298940, 298941, 298942, 298943, 298944, 298945, 298946, 298948, 298949, 298950, 298954, 298955, 298956, 298957, 298958, 298959, 298960, 298962, 298963, 298964, 298965, 298967, 298970, 298971, 298973, 298974, 298975, 298977, 298978, 298979, 298981, 298982, 298983, 298984, 298985, 298986, 298987, 298988, 298989, 298990, 298991, 298992, 298993, 298994, 298996, 298997, 298998, 298999, 305974, 305975, 305976, 305977, 305978, 305979, 305980, 305981, 305982, 305983, 305984, 305985, 305986, 305987, 305988, 305989, 305991, 305992, 305993, 305995, 305996, 305997, 305998, 305999, 306002, 306003, 306004, 306005, 306006, 306008, 306009, 306010, 306011, 306012, 306013, 306014, 306015, 306016, 306017, 306018, 306019, 306021, 306022, 306023, 306024, 306397, 308731, 308732, 308733, 308734, 308735, 308736, 308737, 308738, 308739, 308741, 308742, 308743, 308744, 308745, 308746, 308747, 308748, 308749, 308750, 308751, 308752, 314353, 314355, 314356, 314358, 314360, 314361, 314362, 314363, 314364, 314367, 314368, 314369, 314370, 314371, 314373, 314374, 314376, 314377, 314378, 314379, 314380, 314382, 314383, 314384, 314385, 314386, 314387, 314388, 314389, 314390, 314391, 314392, 314393, 314394, 314395, 314396, 314397, 314399, 314401, 314402, 314421, 314422, 314423, 314424, 314425, 314426, 314427, 314428, 314429, 314430, 314431, 314432, 314433, 314434, 314436, 314437, 314438, 314439, 314444, 318444, 318445, 318446, 318447, 318448, 318449, 318450, 318451, 318452, 318455, 318456, 318457, 318458, 318459, 318460, 318461, 318462, 318464, 318466, 318468, 318469, 318470, 318472, 318474, 318476, 318477, 318478, 318479, 318480, 318481, 318482, 318483, 318485, 325181, 325182, 325183, 325184, 325185, 325186, 325187, 325188, 325189, 325190, 325191, 325192, 325193, 325194, 325195, 325196, 325197, 325198, 325199, 325200, 325201, 325202, 325203, 325826, 325827, 325828, 325829, 325830, 325831, 326564, 326565, 326566, 326567, 326568, 326569, 327070, 332969, 332970, 332971, 332972, 332973, 332974, 332975, 332976, 332977, 332978, 332979, 332980, 332981, 332982, 332983, 332984, 332985, 332986, 332987, 332988, 332989, 332990, 332991, 332992, 332993, 333107, 338021, 338022, 338023, 338024, 338025, 338026, 338027, 338028, 338029, 338030, 338031, 338032, 338033, 338034, 338035, 338036, 338037, 338038, 338039, 338040, 338041, 338042, 338043, 338044, 338045, 338046, 338047, 338048, 338049, 338050, 338051, 338052, 338053, 340684, 340685, 340686, 340687, 340688, 340689, 340690, 340691, 340692, 340693, 340694, 340695, 340696, 340697, 340698, 340699, 340700, 340701, 340702, 340703, 340704, 340705, 340706, 340707, 340708, 340709, 340710, 340711, 340712, 341416, 341417, 341418, 341419, 344707, 344708, 344709, 344710, 344711, 344712, 344713, 345615, 345616, 345617, 345618, 345619, 347947, 347948, 347949, 347950, 347951, 347952, 347953, 347954, 347955, 347956, 347957, 348275, 348276, 351617, 351618, 351619, 351620, 351621, 351622, 351623, 351624, 351625, 351626, 351627, 351628, 351629, 351630, 351631, 351632, 351633, 351634, 351635, 351636, 351637, 351638, 351639, 351640, 351641, 351642, 351643, 351644, 351645, 351646, 351647, 351648, 351649, 351650, 351651, 351652, 351653, 351654, 351655, 351656, 351657, 353757, 353758, 353759, 353760, 353761, 353762, 353763, 353764, 353765, 353766, 353767, 362573, 362574, 362575, 362576, 362577, 362578, 362579, 362580, 362581, 362582, 362583, 362584, 362585, 362586, 362587, 362588, 362589, 362590, 362591, 362592, 362593, 362594, 362595, 362596, 362597, 362598, 362599, 362600, 362601, 362602, 362603, 362604, 362605, 362606, 362607, 362608, 362609, 362610, 362611, 365772, 365773, 365774, 365775, 365776, 365777, 365778, 365779, 365780, 365781, 365782, 365783, 365784, 365785, 365786, 365787, 365788, 365789, 365790, 365791, 365792, 365793, 365794, 365795, 365796, 365797, 365798, 365799, 365800, 365801, 365802, 365803, 365804, 365806, 365807, 365808, 365809, 365810, 365811, 367916, 367917, 367918, 367919, 367920, 367921, 367922, 367923, 367924, 367925, 367926, 367928, 367929, 367930, 367931, 367932, 367933, 367934, 367935, 367936, 367937, 367938, 367939, 367940, 367941, 367942, 367943, 367944, 367945, 367946, 367947, 367948, 367949, 367950, 367951, 367952]
for item in diaries_list:
    #print item
    _ok = "no"
    for d,ditem in enumerate(data):
        if item == ditem["nid"]:
            _ok = "yes"
            #print d,item, ditem["nid"]
    if _ok != "yes":
        print "in folder --> "+str(item)
'''


diaries_list_to_clean = [298958, 182316, 362576, 305991, 182300, 362606, 367919, 367935, 298948, 351653, 351651, 314438, 351656, 182205, 325830, 100390, 272568, 182292, 298962, 351620, 272579, 281846, 367931, 314384, 182299, 298917, 351628, 298960, 298911, 367943, 340688, 306019, 272580, 367948, 115241, 182303, 338022, 362578, 318481, 351641, 367941, 182200, 340693, 306016, 283219, 318459, 182328, 340700, 367926, 362574, 351633, 100410, 351657, 367934, 351652, 115207, 272574, 281607, 348275, 100288, 365779, 314378, 351631, 318474, 314437, 182304, 362575, 365791, 351655, 351645, 351621, 365800, 367949, 362573, 314390, 314439, 351654, 365781, 351629, 344709, 367944, 362577, 182269, 182286, 365782, 351619, 115260, 351644, 362587, 100292, 308748]
print len(diaries_list_to_clean)
print len(set(diaries_list_to_clean))
print "---"
#clean
for i,item in enumerate(data):
    if int(item["nid"]) in diaries_list_to_clean:
        data.remove(item)
#reindes ids
for i,item in enumerate(data):
    item["id"]=i

'''
        if item["nid"] not in new_diaries:
            new_diaries.append(item)
        else:
            print "Repeated: "+str(item["nid"])
    else:
        print item["nid"],
'''

print "diaries in data:"
print len(data)
#print type(data)

#print "in folder 3-Transciptions:"
#print len(diaries_list)
#print type(diaries_list)

new = json.dumps(data)

f = open('diaries_final.json','w+')
## f.write(new)
f.close()
